# Use Rime only for Chinese input ( turn off ascii_mode )
patch:
  # Punctuator and symbols/trigger
  "punctuator/import_preset": alex.symbols
  "recognizer/patterns/punct": "^/([a-z]+|[0-9])$"

  # Do not translate double to normal pinyin in preedit string
  translator/preedit_format: {}

  # Ctrl-n/e for paging candidates
  "key_binder/bindings":
    - { when: has_menu, accept: Control+n, send: Page_Down }
    - { when: paging, accept: Control+e, send: Page_Up }

  switches:
    # - name: ascii_mode
    #   reset: 1
    #   states: ["‰∏≠", "En"]
    - name: full_shape
      states: ["full", "half"]
    - name: zh_simp
      reset: 1
      states: ["Êº¢","Ê±â"]
    # - name: ascii_punct
    #   states: ["Ôºå„ÄÇ", "ÔºåÔºé"]
    - name: extended_charset
      states: ["basic", "ext"]
    - name: show_emoji
      reset: 1
      states: [ "üàöÔ∏èÔ∏è\uFE0E", "üà∂Ô∏èÔ∏è\uFE0F" ]

  simplifier:
    option_name: zh_simp

  engine/translators:
    - punct_translator
    - reverse_lookup_translator
    - script_translator
    - table_translator@custom_phrase
    - table_translator

  custom_phrase:
    dictionary: ""
    user_dict: custom_phrase
    db_class: stabledb
    enable_completion: false
    enable_sentence: false
    initial_quality: 1

  engine/filters:
    - simplifier
    - simplifier@emoji_conversion
    - uniquifier

  emoji_conversion:
    opencc_config: emoji.json
    option_name: show_emoji
    tags: abc

  engine/processors:
    # - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor

  # Loading extented dictionary
  "translator/dictionary": luna_pinyin.extended
